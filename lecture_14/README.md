# Урок 14. Основы тестирования

## Classwork

### Теория:

#### Термины лекции

● Тестирование программного обеспечения — это исследование, проводимое
с целью предоставления заинтересованным сторонам информации о
качестве тестируемого программного продукта или услуги. Тестирование
программного обеспечения также может обеспечить объективный,
независимый взгляд на программное обеспечение, позволяющий бизнесу
оценить и понять риски внедрения программного обеспечения.
● Простое число — натуральное число, имеющее ровно два различных
натуральных делителя. Другими словами, натуральное число p является
простым, если оно отлично от 1 и делится без остатка только на 1 и на само p.
● Натуральные числа (от лат. naturalis «естественный») — числа,
возникающие естественным образом при счёте (1, 2, 3, 4, 5, 6, 7 и так далее).
● Разработка через тестирование (англ. test-driven development, TDD) —
техника разработки программного обеспечения, которая основывается на
повторении очень коротких циклов разработки: сначала пишется тест,
покрывающий желаемое изменение, затем пишется код, который позволит
пройти тест, и под конец проводится рефакторинг нового кода к
соответствующим стандартам.

#### Основы тестирования

##### Функциональное тестирование

Модульное (компонентное)
Интеграционное
Системное
Регрессионное
Приемочное
Смоук

##### Тестирование производительности

Тестирование отказоустойчивости
Нагрузочное
Объемное
Тестирование масштабируемости

##### Обслуживание (регресс и обслуживание)

Регрессионное
Тестирование технического обслуживания

#### Основы doctest

doctest подходит для следующих задач
● Проверка актуальности строк документации модуля путем проверки того,
что все интерактивные примеры по-прежнему работают в соответствии
с документацией.
● Для регрессионного тестирования. Чтобы убедиться, что интерактивные
примеры из тестового файла или тестового объекта работают должным
образом.
● Позволяют написать учебную документацию для пакета, обильно
иллюстрированную примерами ввода-вывода. В зависимости от того,
что выделено — примеры или пояснительный текст, это может быть что-то
вроде “грамотного тестирования” или “исполняемой документации”.

#### Разработка через тестирование, TDD

В TDD (англ. test-driven development) выделяют следующие этапы:
Погружение в Python | Основы тестирования
● Добавление теста
● Запуск всех тестов: убедиться, что новые тесты не проходят
● Написать код
● Запуск всех тестов: убедиться, что все тесты проходят
● Рефакторинг
● Повторить цикл

#### Проверка исполняемой документации

testfile запускает тесты внутри файлов документации

import doctest
doctest.testfile('doc_file.txt', verbose=True)

#### Запуск тестов из командной строки

Для запуска тестов зачастую используют вызов из терминала ОС
● $ python3 -m doctest .\prime.py
● $ python3 -m doctest .\prime.py -v
● $ python3 -m doctest .\prime.md
● $ python3 -m doctest .\prime.md -v

#### Основы тестирования с unittest

Общие моменты работы с unittest
import unittest
class TestCaseName(unittest.TestCase):
def test_method(self):
self.assertEqual(2 * 2, 5, msg='Видимо и в этой
вселенной не работает :-(')
if __name__ == '__main__':
unittest.main()
$ python3 -m unittest tests.py -v
Погружение в Python | Основы тестирования
Сравнение тестов doctest и unittest
Чтобы легче разобраться в работе unittest сравним его
с уже знакомым doctest.
Кстати, тесты doctest можно запускать через unittest

##### Подготовка теста и сворачивание работ

def setUp(self) -> None:
метод setUp выполняется перед запуском каждого теста
Погружение в Python | Основы тестирования
def tearDown(self) -> None:
метод tearDown выполняется, если был выполнен setUp
независимо от того пройден тест или провален

#### Основы тестирования с pytest

Код с assert:
assert утверждение, "Ложное утверждение"
Код с if вместо assert:
if утверждение:
pass
else:
raise AssertionError("Ложное утверждение")
pip install pytest

$ python3 -m pytest tests.py -vv
$ pytest tests_pt.py

#### pytest fixture

Фикстуры pytest не только заменяют setUp и tearDown, но и дают
более широкие возможности тестирования
import pytest
@pytest.fixture
def fix():
...
return result
def test_append (fix):

 обращаемся к result из fix по имени “fix”

...

### task001:

- Основы doctest

### task002:

-Основы тестирования с unittest

### task003:

-Основы тестирования с pytest