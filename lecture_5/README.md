# Урок 5. Интераторы и генераторы

## Classwork

### Теория:

#### Термины лекции

● Итератор — это объект, представляющий поток данных; объект возвращает
данные по одному элементу за раз. Итератор Python должен поддерживать
метод с именем __next__ (), который не принимает аргументов и всегда
возвращает следующий элемент потока.
● Генератор — это объект, который сразу при создании не вычисляет значения
всех своих элементов. Он хранит в памяти только последний вычисленный
элемент, правило перехода к следующему и условие, при котором
выполнение прерывается. Вычисление следующего значения происходит
лишь при выполнении метода next(). Предыдущее значение при этом
теряется.
● Факториал — функция, определённая на множестве неотрицательных целых
чисел. Название происходит от лат. factorialis — действующий, производящий,
умножающий; обозначается n!, произносится эн факториал. Факториал
натурального числа n определяется как произведение всех натуральных
чисел от 1 до n включительно.

#### Однострочники

##### Обмен значения переменных

Классика Python
a, b = b, a

#### Распаковка

Варианты распаковки значений
Обычная распаковка
a, b, c =
последовательность
Распаковка со звёздочкой
*последовательность
Распаковка с упаковкой
a, *b, c =
последовательность

#### Множественное присваивание и сравнение

Объединяем несколько операций в одну
Присваивание
a = b = c = 0
a, b, c = 1, 2, 3
Сравнение
a == b == c
a < b < c

Множественное присваивание допустимо только для неизменяемых типов данных!

#### Плохие однострочники

Запись нескольких строк в одну через ; и отсутствие перехода на новую строку после :
a = 12; b = 42; c = 73
if a < b < c: b = None; print('Ужасный код')

### Итераторы

#### Функция iter()

Разберём на примерах
✔ iter(object[, sentinel])
Функция принимает на вход object поддерживающий
итерацию. Второй параметр функции iter — sentinel
передают для вызываемых объектов-итераторов.

#### Функция next()

Разберём на примерах
✔ next(iterator[, default])
На вход функция принимает итератор,
который вернула функция iter.
Второй параметр функции next — default
нужен для возврата значения по умолчанию
вместо выброса исключения StopIteration.

### Генераторы

#### Генераторные выражения

Генераторные выражения Python позволяют создать собственный генератор, перебирающий значения.
Общий вид выражения:
gen = (expression for expr in sequense1 if
condition1
for expr in sequense2 if condition2
for expr in sequense3 if condition3
...
for expr in sequenseN if conditionN)
Аналог на Python:
for expr in sequense1:
if not condition1:
continue
for expr in sequense2:
if not condition2:
continue
...
for expr in sequenseN:
if not conditionN:
continue

#### List comprehensions

✔ list_comp = [expression for expr in
sequense1 if condition1 ...]
Генератор списков формирует list заполненный
данным и присваивает его переменной.

##### Генераторные выражения или генерация списка?

Задайте себе вопрос
На выходе нужен готовый список?
✔ list comprehensions
✔ [квадратные скобки]
Элементы нужны последовательно?
✔ генераторное выражение
✔ (круглые скобки)

#### Set и dict comprehensions

Set comprehensions
set_comp = {expression for expr in sequense1 if condition1 …}
Dict comprehensions
dict_comp = {key: value for expr in sequense1 if condition1 …}
Сходства и различия
{используются фигурные скобки для выражения}
словарь подставляет ключ и значение через двоеточие

### Создание функции генератора

#### Команда yield

Команда yield работает аналогично return.
Но вместо завершения функции запоминает её состояние.
Повторный вызов продолжает код после yield.
def gen(*args, **kwargs):
...
yield result

#### Функции iter и next для генераторов

Функции iter и next одинаково работают с генераторами
«из коробки» и с созданными самостоятельно.
### task001:

- Однострочники
- Распаковка

### task002:

- Итераторы

### task003:

- Генераторы
- List comprehensions